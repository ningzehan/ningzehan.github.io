!function(n,a){"use strict";var o=Plotly.d3,s=a.Embed=function(){var e=this;e.inited=!1,e.initPromise=new Promise(function(t){e.resolveInit=t}),e.isReady=!1,e.readyPromise=new Promise(function(t){e.resolveReady=t}),e.graphDiv=o.select("#embedded-graph").node(),e.graphDiv.fid=o.select("#plot-fid").text(),e.graphDiv.fn=o.select("#plot-filename").text(),e.layout=null,e.plotResizeTimeout=null,e.externalScripts=[],e.svgContainer=null,e.initialAutosize=null,e.initialWidth=null,e.initialHeight=null},i=s.prototype;i.getLayoutAutosize=function(){switch(o.select("#plot-autosize").text()){case"true":return!0;case"false":return!1;default:return null}},i.getLayoutWidth=function(){var t=o.select("#plot-width").text(),t=parseInt(t,10);return isNaN(t)?null:t},i.getLayoutHeight=function(){var t=o.select("#plot-height").text(),t=parseInt(t,10);return isNaN(t)?null:t},i.getData=function(){return JSON.parse(o.select("#plot-data").text())},i.getLayout=function(){var t=this;if(t.layout)return t.layout;var e=JSON.parse(o.select("#plot-layout").text()),n=t.getLayoutAutosize(),i=t.getLayoutWidth(),a=t.getLayoutHeight();return null!==i||null!==a?(i&&(e.width=i),a&&(e.height=a),e.autosize=!1):null!==n&&(e.autosize=n),t.initialAutosize=e.autosize,t.initialWidth=e.width,t.initialHeight=e.height,e.autosize&&(delete e.width,delete e.height),e},i.getFrames=function(){return JSON.parse(o.select("#plot-frames").text())},i.getDisplayLogo=function(){return"true"===o.select("#plot-logo").text()},i.getDisplayModeBar=function(){switch(o.select("#plot-modebar").text()){case"false":return!1;case"hover":return"hover";default:return!0}},i.getMapboxAccessToken=function(){return o.select("#plot-mapbox-access-token").text()},i.getDisplayLink=function(){return"true"===o.select("#plot-link").text()},i.getPublic=function(){return"true"===o.select("#plot-public").text()},i.getIEVersion=function(){return document.documentMode||0},i.stopLoading=function(){o.select("#plotlybars").remove()},i.initStream=function(t,e){"undefined"!=typeof StreamHead&&((t=new StreamHead(e,t,{autoreload:!0})).init(),t.connect({host:n.WEBSOCKET_HOST,port:n.WEBSOCKET_PORT}))},i.initPostMessage=function(){var e=this;a.addEventListener("message",function(t){e.onMessage(t,e)})},i.isShareplot=function(){if(a.self===a.top)return!1;try{var t=a.location.href;return 0===a.parent.location.href.indexOf(t.split(".embed")[0])}catch(t){return!1}},i.getConfig=function(){var t=this.isShareplot(),e=a===a.top,n=document.body.style;return{displaylogo:this.getDisplayLogo(),displayModeBar:this.getDisplayModeBar(),mapboxAccessToken:this.getMapboxAccessToken(),autosizable:!0,fillFrame:!0,sendData:!1,showLink:this.getDisplayLink(),scrollZoom:t,setBackground:e?function(t,e){n.backgroundColor=Plotly.Color.combine(e,"white"),n.backgroundColor||(n.backgroundColor="white")}:function(t,e){n.backgroundColor=e,n.backgroundColor||(n.backgroundColor="white")}}},i.init=function(){if(!this.inited){var t=!0;(t=-1!==a.location.href.indexOf("link=false")?!1:t)&&(document.getElementById("js-edit-link").style.display="block");t=this;return t.data=t.getData(),t.layout=t.getLayout(),t.frames=t.getFrames(),t.config=t.getConfig(),t.inited=!0,t.resolveInit(),t.initialPlot()}},i.setUp=function(){var t=this;t.getPublic()&&t.initPostMessage(),document.addEventListener("DOMContentLoaded",function(){t.init()})},i.initialPlot=function(){var e=this,i=e.graphDiv;return new Promise(function(t){var e,n;100<i.clientWidth?t():(e=0,n=setInterval(function(){e+=50,(100<i.clientWidth||3e3<e)&&(clearInterval(n),t())},50))}).then(function(){var t=Plotly.plot(i,{data:e.data,layout:e.layout,frames:e.frames,config:e.config});return e.isReady=!0,e.resolveReady(),t}).then(function(){return e.stopLoading(),e.svgContainer=o.select(i).select(".svg-container"),a.addEventListener("resize",function(){e.resizePlot()}),o.select("html").classed("is-iframe",!0),e.svgContainer.style("margin","auto"),e.initStream(i,Plotly),Plotly.Breakpoints.apply(i)}).then(function(){return Plotly.Plots.redrawText(i)})},i.resizePlot=function(){var t=this,e=t.graphDiv;return t.afterReady(function(){if(t.layout.autosize)return delete t.layout.width,delete t.layout.height,Plotly.Plots.resize(e).then(function(){return e.style.background="none",Plotly.Breakpoints.apply(e)})})};var r=s.handlers={};i.onMessage=function(t,e){var n={source:t.source,origin:t.origin,data:t.data},i=r[n.data.task];i?e.initPromise=e.initPromise.then(function(){return i(e,n)}):n.data.task&&console.warn("Supplied task attribute not recognized",n.data)},i.clonePoints=function(t){for(var e,n=[],i=0;i<t.length;i++)e=t[i],n[i]={data:e.data,curveNumber:e.curveNumber,pointNumber:e.pointNumber,x:e.x,y:e.y};return n},i.sendData=function(){this.graphDiv._context.sendData=!0,Plotly.Plots.addLinks(this.graphDiv)},i.afterReady=function(t){return this.readyPromise=this.readyPromise.then(t),this.readyPromise},r.newPlot=function(t,e){return t.afterReady(function(){t.sendData(),Plotly.newPlot(t.graphDiv,e.data.data,e.data.layout)})},r.restyle=function(t,e){return t.afterReady(function(){t.sendData(),Plotly.restyle(t.graphDiv,e.data.update,null,e.data.indices)})},r.relayout=function(t,e){var n,i,a=e.data.update;return t.isReady?n=Plotly.relayout(t.graphDiv,a).then(function(){if(a.autosize||a.width||a.height)return Plotly.Breakpoints.apply(t.graphDiv)}):(i=t.layout,Object.keys(a).forEach(function(t){Plotly.Lib.nestedProperty(i,t).set(a[t])})),!1!==e.data.sendData&&t.afterReady(function(){t.sendData()}),n},r.hover=function(t,e){return t.afterReady(function(){Plotly.Fx.hover(t.graphDiv,e.data.selection,e.data.subplot)})},r.listen=function(o,r){return o.afterReady(function(){function t(){s.postRanges(o,r)}function e(t){s.postPoints("hover",t,r)}function n(t){s.postPoints("unhover",t,r)}function i(t){s.postPoints("click",t,r)}var a=o.graphDiv;a.removeListener("plotly_relayout",t),a.removeListener("plotly_hover",e),a.removeListener("plotly_unhover",n),a.removeListener("plotly_click",i),-1!==r.data.events.indexOf("zoom")&&a.on("plotly_relayout",t),-1!==r.data.events.indexOf("hover")&&(a.on("plotly_hover",e),a.on("plotly_unhover",n)),-1!==r.data.events.indexOf("click")&&a.on("plotly_click",i)})},r.addTraces=function(t,e){return t.afterReady(function(){t.sendData(),Plotly.addTraces(t.graphDiv,e.data.traces,e.data.newIndices)})},r.deleteTraces=function(t,e){return t.afterReady(function(){t.sendData(),Plotly.deleteTraces(t.graphDiv,e.data.indices)})},r.moveTraces=function(t,e){return t.afterReady(function(){t.sendData(),Plotly.moveTraces(t.graphDiv,e.data.currentIndices,e.data.newIndices)})},r.extendTraces=function(e,n){return e.afterReady(function(){var t=n.data;Plotly.extendTraces(e.graphDiv,t.update,t.indices,t.maxPoints)})},r.getLayout=function(t,e){var n=t.getLayout();n.width&&n.height||!e.data.layout||(o.select("#plot-width").text(e.data.layout.width),o.select("#plot-height").text(e.data.layout.height),o.select("#plot-autosize").text("true"),n=t.getLayout()),s.postMessage(e,{layout:n,id:e.data.id})},r.getInitialSize=function(t,e){s.postMessage(e,{id:e.data.id,initialSize:{width:t.initialWidth,height:t.initialHeight,autosize:t.initialAutosize}})},r.getAttributes=function(o,r){return o.afterReady(function(){var t,e,n={},i=Plotly.Plots.graphJson(o.graphDiv,!1,null,"object",!0),a="string"==typeof r.data.attributes?[r.data.attributes]:r.data.attributes||["data","layout"];if(Array.isArray(a))for(e=0;e<a.length;e++)t=Plotly.Lib.nestedProperty(i,a[e]).get(),n[a[e]]=t;else n=i;s.postMessage(r,{task:"getAttributes",response:n})})},r.setAutosize=function(t,e){t.layout.autosize=!!e.data.value},r.ping=function(t,e){s.postMessage(e,{pong:!0})},r.redraw=function(t){if(t.isReady)return Plotly.redraw(t.graphDiv)},s.postRanges=function(t,e){var n={type:"zoom",ranges:{}};Plotly.Axes.list(t.graphDiv).forEach(function(t){n.ranges[t._id]=t.range.map(t.l2c)}),s.postMessage(e,n)},s.postPoints=function(t,e,n){e={type:t,points:i.clonePoints(e.points)};s.postMessage(n,e)},s.postMessage=function(t,e){t.source.postMessage(e,t.origin)}}(ENV,window);